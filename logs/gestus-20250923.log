2025-09-23 17:09:20.737 -03:00 [INF] 🔍 Ambiente atual: Production
2025-09-23 17:09:20.790 -03:00 [INF] 🔍 É Development? False
2025-09-23 17:09:20.924 -03:00 [INF] 🔧 Verificando estado do banco de dados...
2025-09-23 17:09:22.593 -03:00 [INF] ✅ Migrações aplicadas com sucesso
2025-09-23 17:09:22.597 -03:00 [INF] 🌱 Executando seeder inicial...
2025-09-23 17:09:22.626 -03:00 [INF] 🌱 Iniciando seeder de dados iniciais...
2025-09-23 17:09:22.747 -03:00 [INF] 📊 Conexão com banco: OK
2025-09-23 17:09:22.752 -03:00 [INF] 🔧 Criando scopes OpenIddict...
2025-09-23 17:09:23.208 -03:00 [INF] ⚠️ Scope 'profile' já existe no OpenIddict
2025-09-23 17:09:23.230 -03:00 [INF] ⚠️ Scope 'email' já existe no OpenIddict
2025-09-23 17:09:23.234 -03:00 [INF] ⚠️ Scope 'roles' já existe no OpenIddict
2025-09-23 17:09:23.238 -03:00 [INF] 🔧 Criando aplicações OpenIddict...
2025-09-23 17:09:23.309 -03:00 [INF] ⚠️ Aplicação 'gestus_api' já existe no OpenIddict
2025-09-23 17:09:23.328 -03:00 [INF] ⚠️ Aplicação 'gestus_spa' já existe no OpenIddict
2025-09-23 17:09:23.333 -03:00 [INF] 📋 Criando papéis base...
2025-09-23 17:09:23.365 -03:00 [INF] 📋 Papéis existentes antes: 6
2025-09-23 17:09:23.369 -03:00 [INF] 📋 Verificando papel: SuperAdmin
2025-09-23 17:09:23.425 -03:00 [INF] ⚠️  Papel 'SuperAdmin' já existe
2025-09-23 17:09:23.429 -03:00 [INF] 📋 Verificando papel: Admin
2025-09-23 17:09:23.435 -03:00 [INF] ⚠️  Papel 'Admin' já existe
2025-09-23 17:09:23.438 -03:00 [INF] 📋 Verificando papel: Usuario
2025-09-23 17:09:23.444 -03:00 [INF] ⚠️  Papel 'Usuario' já existe
2025-09-23 17:09:23.447 -03:00 [INF] 📋 Verificando papel: GestorUsuarios
2025-09-23 17:09:23.451 -03:00 [INF] ⚠️  Papel 'GestorUsuarios' já existe
2025-09-23 17:09:23.452 -03:00 [INF] 📋 Verificando papel: GestorPermissoes
2025-09-23 17:09:23.456 -03:00 [INF] ⚠️  Papel 'GestorPermissoes' já existe
2025-09-23 17:09:23.459 -03:00 [INF] 📋 Verificando papel: Auditor
2025-09-23 17:09:23.462 -03:00 [INF] ⚠️  Papel 'Auditor' já existe
2025-09-23 17:09:23.466 -03:00 [INF] 📋 Papéis existentes depois: 6
2025-09-23 17:09:23.471 -03:00 [INF] 🔐 Criando permissões base...
2025-09-23 17:09:23.488 -03:00 [INF] ⚠️ Todas as permissões já existem
2025-09-23 17:09:23.497 -03:00 [INF] 📋 Total de permissões no sistema: 42
2025-09-23 17:09:23.502 -03:00 [INF] 🔗 Associando permissões aos papéis...
2025-09-23 17:09:23.536 -03:00 [INF] 👑 SuperAdmin não requer associação explícita de permissões (bypass total)
2025-09-23 17:09:23.554 -03:00 [INF] ⚠️ Todas as permissões já estão associadas ao papel Admin
2025-09-23 17:09:23.557 -03:00 [INF] ✅ Admin agora tem 36 permissões (com ressalvas)
2025-09-23 17:09:23.561 -03:00 [INF] ⚠️ Todas as permissões já estão associadas ao papel Usuario
2025-09-23 17:09:23.564 -03:00 [INF] ✅ Usuario agora tem 1 permissões
2025-09-23 17:09:23.569 -03:00 [INF] ⚠️ Todas as permissões já estão associadas ao papel GestorUsuarios
2025-09-23 17:09:23.571 -03:00 [INF] ✅ GestorUsuarios agora tem 11 permissões
2025-09-23 17:09:23.572 -03:00 [INF] 🔗 Associação de permissões concluída!
2025-09-23 17:09:23.575 -03:00 [INF] 👑 Criando usuário Super Admin...
2025-09-23 17:09:23.577 -03:00 [INF] 👑 Verificando se usuário willian.cavalcante@skymsen.com já existe...
2025-09-23 17:09:23.715 -03:00 [INF] ⚠️  Super Admin já existe (ID: 1)
2025-09-23 17:09:23.792 -03:00 [INF] 🔍 Usuário tem papel SuperAdmin: True
2025-09-23 17:09:23.796 -03:00 [INF] 👥 Criando grupos base...
2025-09-23 17:09:23.814 -03:00 [INF] ⚠️  Grupo 'Administradores' já existe
2025-09-23 17:09:23.820 -03:00 [INF] ⚠️  Grupo 'Gestores' já existe
2025-09-23 17:09:23.824 -03:00 [INF] ⚠️  Grupo 'Usuarios' já existe
2025-09-23 17:09:23.826 -03:00 [INF] ⚠️  Grupo 'Auditores' já existe
2025-09-23 17:09:23.829 -03:00 [INF] 📧 Criando templates de email...
2025-09-23 17:09:23.849 -03:00 [WRN] ⚠️ Nenhuma configuração de email encontrada. Pulando criação de templates.
2025-09-23 17:09:23.855 -03:00 [INF] 🧱 Criando tipos e status de aplicação base...
2025-09-23 17:09:23.935 -03:00 [INF] 🧩 Criando aplicação 'Gestus'...
2025-09-23 17:09:24.055 -03:00 [INF] ⚠️ Aplicação 'Gestus' já existe
2025-09-23 17:09:24.059 -03:00 [INF] 👑 Criando usuário Super Admin...
2025-09-23 17:09:24.061 -03:00 [INF] 👑 Verificando se usuário willian.cavalcante@skymsen.com já existe...
2025-09-23 17:09:24.065 -03:00 [INF] ⚠️  Super Admin já existe (ID: 1)
2025-09-23 17:09:24.071 -03:00 [INF] 🔍 Usuário tem papel SuperAdmin: True
2025-09-23 17:09:24.075 -03:00 [INF] 👤 Criando usuário Administrador...
2025-09-23 17:09:24.082 -03:00 [INF] ⚠️  Administrador já existe (ID: 2)
2025-09-23 17:09:24.170 -03:00 [INF] 💾 Salvando mudanças no banco...
2025-09-23 17:09:24.215 -03:00 [INF] 💾 0 mudanças salvas no banco
2025-09-23 17:09:24.219 -03:00 [INF] ✅ Seeder executado com sucesso!
2025-09-23 17:09:24.221 -03:00 [INF] 📧 Inicializando templates de email padrão...
2025-09-23 17:09:24.226 -03:00 [INF] 🌱 Inicializando templates padrão do sistema...
2025-09-23 17:09:24.250 -03:00 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-23 17:09:24.306 -03:00 [INF] ⚠️ Template padrão já existe - Tipo: RecuperarSenha
2025-09-23 17:09:24.312 -03:00 [INF] ⚠️ Template padrão já existe - Tipo: BoasVindas
2025-09-23 17:09:24.315 -03:00 [INF] ⚠️ Template padrão já existe - Tipo: ConfirmarEmail
2025-09-23 17:09:24.319 -03:00 [INF] ✅ Templates padrão inicializados com sucesso
2025-09-23 17:09:24.322 -03:00 [INF] ✅ Templates de email inicializados com sucesso
2025-09-23 17:09:24.323 -03:00 [INF] ✅ Inicialização do banco concluída com sucesso.
2025-09-23 17:09:24.329 -03:00 [WRN] The WebRootPath was not found: null. Static files may be unavailable.
2025-09-23 17:09:24.542 -03:00 [INF] Initializing UI Database
2025-09-23 17:09:25.198 -03:00 [INF] HTTP GET /saude responded 200 in 330.9227 ms
2025-09-23 17:09:25.305 -03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-23 17:09:35.466 -03:00 [INF] The request URI matched a server endpoint: "Token".
2025-09-23 17:09:35.487 -03:00 [INF] The token request was successfully extracted: {
  "grant_type": "password",
  "scope": "openid profile email roles",
  "username": "willian.cavalcante@skymsen.com",
  "password": "[redacted]",
  "code": "[redacted]",
  "redirect_uri": "string",
  "code_verifier": "string",
  "refresh_token": "[redacted]"
}.
2025-09-23 17:09:35.713 -03:00 [INF] The authentication demand was rejected because the mandatory 'client_id' parameter was missing.
2025-09-23 17:09:35.728 -03:00 [INF] The response was successfully returned as a JSON document: {
  "error": "invalid_client",
  "error_description": "The mandatory 'client_id' parameter is missing.",
  "error_uri": "https://documentation.openiddict.com/errors/ID2029"
}.
2025-09-23 17:09:35.735 -03:00 [INF] HTTP POST /connect/token responded 401 in 285.8600 ms
2025-09-23 17:09:55.605 -03:00 [INF] HTTP GET /saude responded 200 in 102.5669 ms
2025-09-23 17:10:25.768 -03:00 [INF] HTTP GET /saude responded 200 in 132.2119 ms
2025-09-23 17:10:55.896 -03:00 [INF] HTTP GET /saude responded 200 in 106.8039 ms
2025-09-23 17:11:26.026 -03:00 [INF] HTTP GET /saude responded 200 in 105.5522 ms
2025-09-23 17:12:06.798 -03:00 [INF] 🔍 Ambiente atual: Production
2025-09-23 17:12:06.842 -03:00 [INF] 🔍 É Development? False
2025-09-23 17:12:06.986 -03:00 [INF] 🔧 Verificando estado do banco de dados...
2025-09-23 17:12:08.413 -03:00 [INF] ✅ Migrações aplicadas com sucesso
2025-09-23 17:12:08.417 -03:00 [INF] 🌱 Executando seeder inicial...
2025-09-23 17:12:08.441 -03:00 [INF] 🌱 Iniciando seeder de dados iniciais...
2025-09-23 17:12:08.543 -03:00 [INF] 📊 Conexão com banco: OK
2025-09-23 17:12:08.548 -03:00 [INF] 🔧 Criando scopes OpenIddict...
2025-09-23 17:12:08.876 -03:00 [INF] ⚠️ Scope 'profile' já existe no OpenIddict
2025-09-23 17:12:08.892 -03:00 [INF] ⚠️ Scope 'email' já existe no OpenIddict
2025-09-23 17:12:08.895 -03:00 [INF] ⚠️ Scope 'roles' já existe no OpenIddict
2025-09-23 17:12:08.897 -03:00 [INF] 🔧 Criando aplicações OpenIddict...
2025-09-23 17:12:08.954 -03:00 [INF] ⚠️ Aplicação 'gestus_api' já existe no OpenIddict
2025-09-23 17:12:08.969 -03:00 [INF] ⚠️ Aplicação 'gestus_spa' já existe no OpenIddict
2025-09-23 17:12:08.972 -03:00 [INF] 📋 Criando papéis base...
2025-09-23 17:12:08.997 -03:00 [INF] 📋 Papéis existentes antes: 6
2025-09-23 17:12:09.002 -03:00 [INF] 📋 Verificando papel: SuperAdmin
2025-09-23 17:12:09.049 -03:00 [INF] ⚠️  Papel 'SuperAdmin' já existe
2025-09-23 17:12:09.051 -03:00 [INF] 📋 Verificando papel: Admin
2025-09-23 17:12:09.054 -03:00 [INF] ⚠️  Papel 'Admin' já existe
2025-09-23 17:12:09.055 -03:00 [INF] 📋 Verificando papel: Usuario
2025-09-23 17:12:09.057 -03:00 [INF] ⚠️  Papel 'Usuario' já existe
2025-09-23 17:12:09.058 -03:00 [INF] 📋 Verificando papel: GestorUsuarios
2025-09-23 17:12:09.060 -03:00 [INF] ⚠️  Papel 'GestorUsuarios' já existe
2025-09-23 17:12:09.061 -03:00 [INF] 📋 Verificando papel: GestorPermissoes
2025-09-23 17:12:09.063 -03:00 [INF] ⚠️  Papel 'GestorPermissoes' já existe
2025-09-23 17:12:09.064 -03:00 [INF] 📋 Verificando papel: Auditor
2025-09-23 17:12:09.065 -03:00 [INF] ⚠️  Papel 'Auditor' já existe
2025-09-23 17:12:09.068 -03:00 [INF] 📋 Papéis existentes depois: 6
2025-09-23 17:12:09.073 -03:00 [INF] 🔐 Criando permissões base...
2025-09-23 17:12:09.088 -03:00 [INF] ⚠️ Todas as permissões já existem
2025-09-23 17:12:09.093 -03:00 [INF] 📋 Total de permissões no sistema: 42
2025-09-23 17:12:09.096 -03:00 [INF] 🔗 Associando permissões aos papéis...
2025-09-23 17:12:09.124 -03:00 [INF] 👑 SuperAdmin não requer associação explícita de permissões (bypass total)
2025-09-23 17:12:09.139 -03:00 [INF] ⚠️ Todas as permissões já estão associadas ao papel Admin
2025-09-23 17:12:09.142 -03:00 [INF] ✅ Admin agora tem 36 permissões (com ressalvas)
2025-09-23 17:12:09.144 -03:00 [INF] ⚠️ Todas as permissões já estão associadas ao papel Usuario
2025-09-23 17:12:09.146 -03:00 [INF] ✅ Usuario agora tem 1 permissões
2025-09-23 17:12:09.148 -03:00 [INF] ⚠️ Todas as permissões já estão associadas ao papel GestorUsuarios
2025-09-23 17:12:09.151 -03:00 [INF] ✅ GestorUsuarios agora tem 11 permissões
2025-09-23 17:12:09.152 -03:00 [INF] 🔗 Associação de permissões concluída!
2025-09-23 17:12:09.154 -03:00 [INF] 👑 Criando usuário Super Admin...
2025-09-23 17:12:09.155 -03:00 [INF] 👑 Verificando se usuário willian.cavalcante@skymsen.com já existe...
2025-09-23 17:12:09.275 -03:00 [INF] ⚠️  Super Admin já existe (ID: 1)
2025-09-23 17:12:09.347 -03:00 [INF] 🔍 Usuário tem papel SuperAdmin: True
2025-09-23 17:12:09.353 -03:00 [INF] 👥 Criando grupos base...
2025-09-23 17:12:09.369 -03:00 [INF] ⚠️  Grupo 'Administradores' já existe
2025-09-23 17:12:09.372 -03:00 [INF] ⚠️  Grupo 'Gestores' já existe
2025-09-23 17:12:09.375 -03:00 [INF] ⚠️  Grupo 'Usuarios' já existe
2025-09-23 17:12:09.376 -03:00 [INF] ⚠️  Grupo 'Auditores' já existe
2025-09-23 17:12:09.379 -03:00 [INF] 📧 Criando templates de email...
2025-09-23 17:12:09.394 -03:00 [WRN] ⚠️ Nenhuma configuração de email encontrada. Pulando criação de templates.
2025-09-23 17:12:09.407 -03:00 [INF] 🧱 Criando tipos e status de aplicação base...
2025-09-23 17:12:09.475 -03:00 [INF] 🧩 Criando aplicação 'Gestus'...
2025-09-23 17:12:09.572 -03:00 [INF] ⚠️ Aplicação 'Gestus' já existe
2025-09-23 17:12:09.575 -03:00 [INF] 👑 Criando usuário Super Admin...
2025-09-23 17:12:09.576 -03:00 [INF] 👑 Verificando se usuário willian.cavalcante@skymsen.com já existe...
2025-09-23 17:12:09.578 -03:00 [INF] ⚠️  Super Admin já existe (ID: 1)
2025-09-23 17:12:09.580 -03:00 [INF] 🔍 Usuário tem papel SuperAdmin: True
2025-09-23 17:12:09.583 -03:00 [INF] 👤 Criando usuário Administrador...
2025-09-23 17:12:09.589 -03:00 [INF] ⚠️  Administrador já existe (ID: 2)
2025-09-23 17:12:09.653 -03:00 [INF] 💾 Salvando mudanças no banco...
2025-09-23 17:12:09.686 -03:00 [INF] 💾 0 mudanças salvas no banco
2025-09-23 17:12:09.688 -03:00 [INF] ✅ Seeder executado com sucesso!
2025-09-23 17:12:09.689 -03:00 [INF] 📧 Inicializando templates de email padrão...
2025-09-23 17:12:09.692 -03:00 [INF] 🌱 Inicializando templates padrão do sistema...
2025-09-23 17:12:09.711 -03:00 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-23 17:12:09.753 -03:00 [INF] ⚠️ Template padrão já existe - Tipo: RecuperarSenha
2025-09-23 17:12:09.757 -03:00 [INF] ⚠️ Template padrão já existe - Tipo: BoasVindas
2025-09-23 17:12:09.759 -03:00 [INF] ⚠️ Template padrão já existe - Tipo: ConfirmarEmail
2025-09-23 17:12:09.760 -03:00 [INF] ✅ Templates padrão inicializados com sucesso
2025-09-23 17:12:09.761 -03:00 [INF] ✅ Templates de email inicializados com sucesso
2025-09-23 17:12:09.762 -03:00 [INF] ✅ Inicialização do banco concluída com sucesso.
2025-09-23 17:12:09.768 -03:00 [WRN] The WebRootPath was not found: null. Static files may be unavailable.
2025-09-23 17:12:09.930 -03:00 [INF] Initializing UI Database
2025-09-23 17:12:10.601 -03:00 [INF] HTTP GET /saude responded 200 in 292.3052 ms
2025-09-23 17:12:10.696 -03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-23 17:12:11.208 -03:00 [INF] HTTP GET /index.html responded 200 in 58.7054 ms
2025-09-23 17:12:11.272 -03:00 [INF] HTTP GET /index.js responded 200 in 0.5365 ms
2025-09-23 17:12:11.272 -03:00 [INF] HTTP GET /index.css responded 200 in 2.8357 ms
2025-09-23 17:12:11.276 -03:00 [INF] HTTP GET /.well-known/appspecific/com.chrome.devtools.json responded 404 in 14.2260 ms
2025-09-23 17:12:11.286 -03:00 [INF] HTTP GET /swagger-ui-standalone-preset.js responded 200 in 15.0095 ms
2025-09-23 17:12:11.286 -03:00 [INF] HTTP GET /swagger-ui.css responded 200 in 23.1252 ms
2025-09-23 17:12:11.358 -03:00 [INF] HTTP GET /swagger-ui-bundle.js responded 200 in 87.8283 ms
2025-09-23 17:12:11.661 -03:00 [INF] HTTP GET /favicon-32x32.png responded 200 in 0.4843 ms
2025-09-23 17:12:12.179 -03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 531.3896 ms
2025-09-23 17:12:41.047 -03:00 [INF] HTTP GET /saude responded 200 in 164.8843 ms
2025-09-23 17:12:46.602 -03:00 [INF] The request URI matched a server endpoint: "Token".
2025-09-23 17:12:46.614 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Microsoft.AspNetCore.Http.Features.FormFeature.ResolveHasInvalidAntiforgeryValidationFeature()
   at Microsoft.AspNetCore.Http.Features.FormFeature.HandleUncheckedAntiforgeryValidationFeature()
   at Microsoft.AspNetCore.Http.Features.FormFeature.ReadFormAsync(CancellationToken cancellationToken)
   at OpenIddict.Server.AspNetCore.OpenIddictServerAspNetCoreHandlers.ExtractPostRequest`1.HandleAsync(TContext context)
   at OpenIddict.Server.OpenIddictServerDispatcher.DispatchAsync[TContext](TContext context)
   at OpenIddict.Server.OpenIddictServerDispatcher.DispatchAsync[TContext](TContext context)
   at OpenIddict.Server.OpenIddictServerHandlers.Exchange.ExtractTokenRequest.HandleAsync(ProcessRequestContext context)
   at OpenIddict.Server.OpenIddictServerDispatcher.DispatchAsync[TContext](TContext context)
   at OpenIddict.Server.OpenIddictServerDispatcher.DispatchAsync[TContext](TContext context)
   at OpenIddict.Server.AspNetCore.OpenIddictServerAspNetCoreHandler.HandleRequestAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Gestus.Inicializacao.<>c__DisplayClass1_0.<<ConfigurarPipelineAsync>b__3>d.MoveNext() in D:\projetos\Gestus\Inicializacao.cs:line 191
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-23 17:12:46.663 -03:00 [ERR] An exception was thrown attempting to execute the error handler.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Microsoft.AspNetCore.Http.Features.FormFeature.ResolveHasInvalidAntiforgeryValidationFeature()
   at Microsoft.AspNetCore.Http.Features.FormFeature.HandleUncheckedAntiforgeryValidationFeature()
   at Microsoft.AspNetCore.Http.Features.FormFeature.ReadFormAsync(CancellationToken cancellationToken)
   at OpenIddict.Validation.AspNetCore.OpenIddictValidationAspNetCoreHandlers.ExtractAccessTokenFromBodyForm.HandleAsync(ProcessAuthenticationContext context)
   at OpenIddict.Validation.OpenIddictValidationDispatcher.DispatchAsync[TContext](TContext context)
   at OpenIddict.Validation.OpenIddictValidationDispatcher.DispatchAsync[TContext](TContext context)
   at OpenIddict.Validation.AspNetCore.OpenIddictValidationAspNetCoreHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.AuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Gestus.Inicializacao.<>c__DisplayClass1_0.<<ConfigurarPipelineAsync>b__3>d.MoveNext() in D:\projetos\Gestus\Inicializacao.cs:line 191
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
2025-09-23 17:12:46.678 -03:00 [ERR] HTTP POST /connect/token responded 500 in 82.0780 ms
System.NullReferenceException: Object reference not set to an instance of an object.
   at Microsoft.AspNetCore.Http.Features.FormFeature.ResolveHasInvalidAntiforgeryValidationFeature()
   at Microsoft.AspNetCore.Http.Features.FormFeature.HandleUncheckedAntiforgeryValidationFeature()
   at Microsoft.AspNetCore.Http.Features.FormFeature.ReadFormAsync(CancellationToken cancellationToken)
   at OpenIddict.Server.AspNetCore.OpenIddictServerAspNetCoreHandlers.ExtractPostRequest`1.HandleAsync(TContext context)
   at OpenIddict.Server.OpenIddictServerDispatcher.DispatchAsync[TContext](TContext context)
   at OpenIddict.Server.OpenIddictServerDispatcher.DispatchAsync[TContext](TContext context)
   at OpenIddict.Server.OpenIddictServerHandlers.Exchange.ExtractTokenRequest.HandleAsync(ProcessRequestContext context)
   at OpenIddict.Server.OpenIddictServerDispatcher.DispatchAsync[TContext](TContext context)
   at OpenIddict.Server.OpenIddictServerDispatcher.DispatchAsync[TContext](TContext context)
   at OpenIddict.Server.AspNetCore.OpenIddictServerAspNetCoreHandler.HandleRequestAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Gestus.Inicializacao.<>c__DisplayClass1_0.<<ConfigurarPipelineAsync>b__3>d.MoveNext() in D:\projetos\Gestus\Inicializacao.cs:line 191
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-09-23 17:12:46.703 -03:00 [ERR] Connection id "0HNFQRLT42BOF", Request id "0HNFQRLT42BOF:00000003": An unhandled exception was thrown by the application.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Microsoft.AspNetCore.Http.Features.FormFeature.ResolveHasInvalidAntiforgeryValidationFeature()
   at Microsoft.AspNetCore.Http.Features.FormFeature.HandleUncheckedAntiforgeryValidationFeature()
   at Microsoft.AspNetCore.Http.Features.FormFeature.ReadFormAsync(CancellationToken cancellationToken)
   at OpenIddict.Server.AspNetCore.OpenIddictServerAspNetCoreHandlers.ExtractPostRequest`1.HandleAsync(TContext context)
   at OpenIddict.Server.OpenIddictServerDispatcher.DispatchAsync[TContext](TContext context)
   at OpenIddict.Server.OpenIddictServerDispatcher.DispatchAsync[TContext](TContext context)
   at OpenIddict.Server.OpenIddictServerHandlers.Exchange.ExtractTokenRequest.HandleAsync(ProcessRequestContext context)
   at OpenIddict.Server.OpenIddictServerDispatcher.DispatchAsync[TContext](TContext context)
   at OpenIddict.Server.OpenIddictServerDispatcher.DispatchAsync[TContext](TContext context)
   at OpenIddict.Server.AspNetCore.OpenIddictServerAspNetCoreHandler.HandleRequestAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Gestus.Inicializacao.<>c__DisplayClass1_0.<<ConfigurarPipelineAsync>b__3>d.MoveNext() in D:\projetos\Gestus\Inicializacao.cs:line 191
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2025-09-23 17:13:11.201 -03:00 [INF] HTTP GET /saude responded 200 in 125.2568 ms
2025-09-23 17:13:41.327 -03:00 [INF] HTTP GET /saude responded 200 in 104.7669 ms
2025-09-23 17:14:26.990 -03:00 [INF] 🔍 Ambiente atual: Production
2025-09-23 17:14:27.031 -03:00 [INF] 🔍 É Development? False
2025-09-23 17:14:27.223 -03:00 [INF] 🔧 Verificando estado do banco de dados...
2025-09-23 17:14:28.749 -03:00 [INF] ✅ Migrações aplicadas com sucesso
2025-09-23 17:14:28.752 -03:00 [INF] 🌱 Executando seeder inicial...
2025-09-23 17:14:28.775 -03:00 [INF] 🌱 Iniciando seeder de dados iniciais...
2025-09-23 17:14:28.885 -03:00 [INF] 📊 Conexão com banco: OK
2025-09-23 17:14:28.890 -03:00 [INF] 🔧 Criando scopes OpenIddict...
2025-09-23 17:14:29.291 -03:00 [INF] ⚠️ Scope 'profile' já existe no OpenIddict
2025-09-23 17:14:29.307 -03:00 [INF] ⚠️ Scope 'email' já existe no OpenIddict
2025-09-23 17:14:29.312 -03:00 [INF] ⚠️ Scope 'roles' já existe no OpenIddict
2025-09-23 17:14:29.317 -03:00 [INF] 🔧 Criando aplicações OpenIddict...
2025-09-23 17:14:29.377 -03:00 [INF] ⚠️ Aplicação 'gestus_api' já existe no OpenIddict
2025-09-23 17:14:29.391 -03:00 [INF] ⚠️ Aplicação 'gestus_spa' já existe no OpenIddict
2025-09-23 17:14:29.395 -03:00 [INF] 📋 Criando papéis base...
2025-09-23 17:14:29.422 -03:00 [INF] 📋 Papéis existentes antes: 6
2025-09-23 17:14:29.424 -03:00 [INF] 📋 Verificando papel: SuperAdmin
2025-09-23 17:14:29.475 -03:00 [INF] ⚠️  Papel 'SuperAdmin' já existe
2025-09-23 17:14:29.477 -03:00 [INF] 📋 Verificando papel: Admin
2025-09-23 17:14:29.479 -03:00 [INF] ⚠️  Papel 'Admin' já existe
2025-09-23 17:14:29.480 -03:00 [INF] 📋 Verificando papel: Usuario
2025-09-23 17:14:29.482 -03:00 [INF] ⚠️  Papel 'Usuario' já existe
2025-09-23 17:14:29.484 -03:00 [INF] 📋 Verificando papel: GestorUsuarios
2025-09-23 17:14:29.486 -03:00 [INF] ⚠️  Papel 'GestorUsuarios' já existe
2025-09-23 17:14:29.487 -03:00 [INF] 📋 Verificando papel: GestorPermissoes
2025-09-23 17:14:29.489 -03:00 [INF] ⚠️  Papel 'GestorPermissoes' já existe
2025-09-23 17:14:29.490 -03:00 [INF] 📋 Verificando papel: Auditor
2025-09-23 17:14:29.492 -03:00 [INF] ⚠️  Papel 'Auditor' já existe
2025-09-23 17:14:29.493 -03:00 [INF] 📋 Papéis existentes depois: 6
2025-09-23 17:14:29.497 -03:00 [INF] 🔐 Criando permissões base...
2025-09-23 17:14:29.511 -03:00 [INF] ⚠️ Todas as permissões já existem
2025-09-23 17:14:29.515 -03:00 [INF] 📋 Total de permissões no sistema: 42
2025-09-23 17:14:29.520 -03:00 [INF] 🔗 Associando permissões aos papéis...
2025-09-23 17:14:29.546 -03:00 [INF] 👑 SuperAdmin não requer associação explícita de permissões (bypass total)
2025-09-23 17:14:29.560 -03:00 [INF] ⚠️ Todas as permissões já estão associadas ao papel Admin
2025-09-23 17:14:29.562 -03:00 [INF] ✅ Admin agora tem 36 permissões (com ressalvas)
2025-09-23 17:14:29.565 -03:00 [INF] ⚠️ Todas as permissões já estão associadas ao papel Usuario
2025-09-23 17:14:29.568 -03:00 [INF] ✅ Usuario agora tem 1 permissões
2025-09-23 17:14:29.572 -03:00 [INF] ⚠️ Todas as permissões já estão associadas ao papel GestorUsuarios
2025-09-23 17:14:29.573 -03:00 [INF] ✅ GestorUsuarios agora tem 11 permissões
2025-09-23 17:14:29.574 -03:00 [INF] 🔗 Associação de permissões concluída!
2025-09-23 17:14:29.576 -03:00 [INF] 👑 Criando usuário Super Admin...
2025-09-23 17:14:29.577 -03:00 [INF] 👑 Verificando se usuário willian.cavalcante@skymsen.com já existe...
2025-09-23 17:14:29.694 -03:00 [INF] ⚠️  Super Admin já existe (ID: 1)
2025-09-23 17:14:29.757 -03:00 [INF] 🔍 Usuário tem papel SuperAdmin: True
2025-09-23 17:14:29.760 -03:00 [INF] 👥 Criando grupos base...
2025-09-23 17:14:29.774 -03:00 [INF] ⚠️  Grupo 'Administradores' já existe
2025-09-23 17:14:29.777 -03:00 [INF] ⚠️  Grupo 'Gestores' já existe
2025-09-23 17:14:29.779 -03:00 [INF] ⚠️  Grupo 'Usuarios' já existe
2025-09-23 17:14:29.781 -03:00 [INF] ⚠️  Grupo 'Auditores' já existe
2025-09-23 17:14:29.785 -03:00 [INF] 📧 Criando templates de email...
2025-09-23 17:14:29.799 -03:00 [WRN] ⚠️ Nenhuma configuração de email encontrada. Pulando criação de templates.
2025-09-23 17:14:29.804 -03:00 [INF] 🧱 Criando tipos e status de aplicação base...
2025-09-23 17:14:29.904 -03:00 [INF] 🧩 Criando aplicação 'Gestus'...
2025-09-23 17:14:30.037 -03:00 [INF] ⚠️ Aplicação 'Gestus' já existe
2025-09-23 17:14:30.041 -03:00 [INF] 👑 Criando usuário Super Admin...
2025-09-23 17:14:30.042 -03:00 [INF] 👑 Verificando se usuário willian.cavalcante@skymsen.com já existe...
2025-09-23 17:14:30.046 -03:00 [INF] ⚠️  Super Admin já existe (ID: 1)
2025-09-23 17:14:30.050 -03:00 [INF] 🔍 Usuário tem papel SuperAdmin: True
2025-09-23 17:14:30.054 -03:00 [INF] 👤 Criando usuário Administrador...
2025-09-23 17:14:30.062 -03:00 [INF] ⚠️  Administrador já existe (ID: 2)
2025-09-23 17:14:30.149 -03:00 [INF] 💾 Salvando mudanças no banco...
2025-09-23 17:14:30.187 -03:00 [INF] 💾 0 mudanças salvas no banco
2025-09-23 17:14:30.190 -03:00 [INF] ✅ Seeder executado com sucesso!
2025-09-23 17:14:30.191 -03:00 [INF] 📧 Inicializando templates de email padrão...
2025-09-23 17:14:30.194 -03:00 [INF] 🌱 Inicializando templates padrão do sistema...
2025-09-23 17:14:30.214 -03:00 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-23 17:14:30.260 -03:00 [INF] ⚠️ Template padrão já existe - Tipo: RecuperarSenha
2025-09-23 17:14:30.263 -03:00 [INF] ⚠️ Template padrão já existe - Tipo: BoasVindas
2025-09-23 17:14:30.265 -03:00 [INF] ⚠️ Template padrão já existe - Tipo: ConfirmarEmail
2025-09-23 17:14:30.268 -03:00 [INF] ✅ Templates padrão inicializados com sucesso
2025-09-23 17:14:30.269 -03:00 [INF] ✅ Templates de email inicializados com sucesso
2025-09-23 17:14:30.270 -03:00 [INF] ✅ Inicialização do banco concluída com sucesso.
2025-09-23 17:14:30.275 -03:00 [WRN] The WebRootPath was not found: null. Static files may be unavailable.
2025-09-23 17:14:30.461 -03:00 [INF] Initializing UI Database
2025-09-23 17:14:30.961 -03:00 [INF] HTTP GET /index.html responded 200 in 184.1400 ms
2025-09-23 17:14:31.051 -03:00 [INF] HTTP GET /index.js responded 200 in 1.8786 ms
2025-09-23 17:14:31.060 -03:00 [INF] HTTP GET /index.css responded 200 in 14.0653 ms
2025-09-23 17:14:31.085 -03:00 [INF] HTTP GET /swagger-ui.css responded 200 in 39.4794 ms
2025-09-23 17:14:31.086 -03:00 [INF] HTTP GET /swagger-ui-standalone-preset.js responded 200 in 38.1789 ms
2025-09-23 17:14:31.090 -03:00 [INF] HTTP GET /.well-known/appspecific/com.chrome.devtools.json responded 404 in 26.8605 ms
2025-09-23 17:14:31.167 -03:00 [INF] HTTP GET /swagger-ui-bundle.js responded 200 in 120.5209 ms
2025-09-23 17:14:31.348 -03:00 [INF] HTTP GET /saude responded 200 in 574.4598 ms
2025-09-23 17:14:31.522 -03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-23 17:14:31.539 -03:00 [INF] HTTP GET /favicon-32x32.png responded 200 in 0.3950 ms
2025-09-23 17:14:32.024 -03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 485.6996 ms
2025-09-23 17:14:45.572 -03:00 [INF] The request URI matched a server endpoint: "Token".
2025-09-23 17:14:45.602 -03:00 [INF] The token request was successfully extracted: {}.
2025-09-23 17:14:45.609 -03:00 [INF] The token request was rejected because the mandatory 'grant_type' parameter was missing.
2025-09-23 17:14:45.631 -03:00 [INF] The response was successfully returned as a JSON document: {
  "error": "invalid_request",
  "error_description": "The mandatory 'grant_type' parameter is missing.",
  "error_uri": "https://documentation.openiddict.com/errors/ID2029"
}.
2025-09-23 17:14:45.637 -03:00 [INF] HTTP POST /connect/token responded 400 in 73.8060 ms
2025-09-23 17:15:01.971 -03:00 [INF] HTTP GET /saude responded 200 in 155.7015 ms
2025-09-23 17:15:32.135 -03:00 [INF] HTTP GET /saude responded 200 in 140.3486 ms
2025-09-23 17:16:02.257 -03:00 [INF] HTTP GET /saude responded 200 in 91.7719 ms
2025-09-23 17:16:32.451 -03:00 [INF] HTTP GET /saude responded 200 in 158.3491 ms
2025-09-23 17:17:02.569 -03:00 [INF] HTTP GET /saude responded 200 in 96.9108 ms
2025-09-23 17:17:32.684 -03:00 [INF] HTTP GET /saude responded 200 in 93.1266 ms
2025-09-23 17:18:02.806 -03:00 [INF] HTTP GET /saude responded 200 in 97.6439 ms
2025-09-23 17:18:32.944 -03:00 [INF] HTTP GET /saude responded 200 in 108.2223 ms
2025-09-23 17:18:56.507 -03:00 [INF] The request URI matched a server endpoint: "Token".
2025-09-23 17:18:56.513 -03:00 [INF] The token request was successfully extracted: {}.
2025-09-23 17:18:56.516 -03:00 [INF] The token request was rejected because the mandatory 'grant_type' parameter was missing.
2025-09-23 17:18:56.522 -03:00 [INF] The response was successfully returned as a JSON document: {
  "error": "invalid_request",
  "error_description": "The mandatory 'grant_type' parameter is missing.",
  "error_uri": "https://documentation.openiddict.com/errors/ID2029"
}.
2025-09-23 17:18:56.526 -03:00 [INF] HTTP POST /connect/token responded 400 in 19.1682 ms
2025-09-23 17:19:42.183 -03:00 [INF] 🔍 Ambiente atual: Production
2025-09-23 17:19:42.222 -03:00 [INF] 🔍 É Development? False
2025-09-23 17:19:42.331 -03:00 [INF] 🔧 Verificando estado do banco de dados...
2025-09-23 17:19:43.781 -03:00 [INF] ✅ Migrações aplicadas com sucesso
2025-09-23 17:19:43.784 -03:00 [INF] 🌱 Executando seeder inicial...
2025-09-23 17:19:43.807 -03:00 [INF] 🌱 Iniciando seeder de dados iniciais...
2025-09-23 17:19:43.905 -03:00 [INF] 📊 Conexão com banco: OK
2025-09-23 17:19:43.909 -03:00 [INF] 🔧 Criando scopes OpenIddict...
2025-09-23 17:19:44.274 -03:00 [INF] ⚠️ Scope 'profile' já existe no OpenIddict
2025-09-23 17:19:44.290 -03:00 [INF] ⚠️ Scope 'email' já existe no OpenIddict
2025-09-23 17:19:44.292 -03:00 [INF] ⚠️ Scope 'roles' já existe no OpenIddict
2025-09-23 17:19:44.295 -03:00 [INF] 🔧 Criando aplicações OpenIddict...
2025-09-23 17:19:44.353 -03:00 [INF] ⚠️ Aplicação 'gestus_api' já existe no OpenIddict
2025-09-23 17:19:44.370 -03:00 [INF] ⚠️ Aplicação 'gestus_spa' já existe no OpenIddict
2025-09-23 17:19:44.377 -03:00 [INF] 📋 Criando papéis base...
2025-09-23 17:19:44.417 -03:00 [INF] 📋 Papéis existentes antes: 6
2025-09-23 17:19:44.420 -03:00 [INF] 📋 Verificando papel: SuperAdmin
2025-09-23 17:19:44.476 -03:00 [INF] ⚠️  Papel 'SuperAdmin' já existe
2025-09-23 17:19:44.478 -03:00 [INF] 📋 Verificando papel: Admin
2025-09-23 17:19:44.480 -03:00 [INF] ⚠️  Papel 'Admin' já existe
2025-09-23 17:19:44.482 -03:00 [INF] 📋 Verificando papel: Usuario
2025-09-23 17:19:44.486 -03:00 [INF] ⚠️  Papel 'Usuario' já existe
2025-09-23 17:19:44.487 -03:00 [INF] 📋 Verificando papel: GestorUsuarios
2025-09-23 17:19:44.489 -03:00 [INF] ⚠️  Papel 'GestorUsuarios' já existe
2025-09-23 17:19:44.490 -03:00 [INF] 📋 Verificando papel: GestorPermissoes
2025-09-23 17:19:44.492 -03:00 [INF] ⚠️  Papel 'GestorPermissoes' já existe
2025-09-23 17:19:44.493 -03:00 [INF] 📋 Verificando papel: Auditor
2025-09-23 17:19:44.495 -03:00 [INF] ⚠️  Papel 'Auditor' já existe
2025-09-23 17:19:44.497 -03:00 [INF] 📋 Papéis existentes depois: 6
2025-09-23 17:19:44.501 -03:00 [INF] 🔐 Criando permissões base...
2025-09-23 17:19:44.515 -03:00 [INF] ⚠️ Todas as permissões já existem
2025-09-23 17:19:44.523 -03:00 [INF] 📋 Total de permissões no sistema: 42
2025-09-23 17:19:44.526 -03:00 [INF] 🔗 Associando permissões aos papéis...
2025-09-23 17:19:44.553 -03:00 [INF] 👑 SuperAdmin não requer associação explícita de permissões (bypass total)
2025-09-23 17:19:44.568 -03:00 [INF] ⚠️ Todas as permissões já estão associadas ao papel Admin
2025-09-23 17:19:44.571 -03:00 [INF] ✅ Admin agora tem 36 permissões (com ressalvas)
2025-09-23 17:19:44.575 -03:00 [INF] ⚠️ Todas as permissões já estão associadas ao papel Usuario
2025-09-23 17:19:44.575 -03:00 [INF] ✅ Usuario agora tem 1 permissões
2025-09-23 17:19:44.579 -03:00 [INF] ⚠️ Todas as permissões já estão associadas ao papel GestorUsuarios
2025-09-23 17:19:44.581 -03:00 [INF] ✅ GestorUsuarios agora tem 11 permissões
2025-09-23 17:19:44.583 -03:00 [INF] 🔗 Associação de permissões concluída!
2025-09-23 17:19:44.585 -03:00 [INF] 👑 Criando usuário Super Admin...
2025-09-23 17:19:44.587 -03:00 [INF] 👑 Verificando se usuário willian.cavalcante@skymsen.com já existe...
2025-09-23 17:19:44.705 -03:00 [INF] ⚠️  Super Admin já existe (ID: 1)
2025-09-23 17:19:44.765 -03:00 [INF] 🔍 Usuário tem papel SuperAdmin: True
2025-09-23 17:19:44.769 -03:00 [INF] 👥 Criando grupos base...
2025-09-23 17:19:44.784 -03:00 [INF] ⚠️  Grupo 'Administradores' já existe
2025-09-23 17:19:44.787 -03:00 [INF] ⚠️  Grupo 'Gestores' já existe
2025-09-23 17:19:44.789 -03:00 [INF] ⚠️  Grupo 'Usuarios' já existe
2025-09-23 17:19:44.791 -03:00 [INF] ⚠️  Grupo 'Auditores' já existe
2025-09-23 17:19:44.793 -03:00 [INF] 📧 Criando templates de email...
2025-09-23 17:19:44.808 -03:00 [WRN] ⚠️ Nenhuma configuração de email encontrada. Pulando criação de templates.
2025-09-23 17:19:44.811 -03:00 [INF] 🧱 Criando tipos e status de aplicação base...
2025-09-23 17:19:44.889 -03:00 [INF] 🧩 Criando aplicação 'Gestus'...
2025-09-23 17:19:44.987 -03:00 [INF] ⚠️ Aplicação 'Gestus' já existe
2025-09-23 17:19:44.989 -03:00 [INF] 👑 Criando usuário Super Admin...
2025-09-23 17:19:44.991 -03:00 [INF] 👑 Verificando se usuário willian.cavalcante@skymsen.com já existe...
2025-09-23 17:19:44.993 -03:00 [INF] ⚠️  Super Admin já existe (ID: 1)
2025-09-23 17:19:44.996 -03:00 [INF] 🔍 Usuário tem papel SuperAdmin: True
2025-09-23 17:19:44.998 -03:00 [INF] 👤 Criando usuário Administrador...
2025-09-23 17:19:45.003 -03:00 [INF] ⚠️  Administrador já existe (ID: 2)
2025-09-23 17:19:45.073 -03:00 [INF] 💾 Salvando mudanças no banco...
2025-09-23 17:19:45.111 -03:00 [INF] 💾 0 mudanças salvas no banco
2025-09-23 17:19:45.114 -03:00 [INF] ✅ Seeder executado com sucesso!
2025-09-23 17:19:45.116 -03:00 [INF] 📧 Inicializando templates de email padrão...
2025-09-23 17:19:45.121 -03:00 [INF] 🌱 Inicializando templates padrão do sistema...
2025-09-23 17:19:45.141 -03:00 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-23 17:19:45.183 -03:00 [INF] ⚠️ Template padrão já existe - Tipo: RecuperarSenha
2025-09-23 17:19:45.188 -03:00 [INF] ⚠️ Template padrão já existe - Tipo: BoasVindas
2025-09-23 17:19:45.190 -03:00 [INF] ⚠️ Template padrão já existe - Tipo: ConfirmarEmail
2025-09-23 17:19:45.191 -03:00 [INF] ✅ Templates padrão inicializados com sucesso
2025-09-23 17:19:45.192 -03:00 [INF] ✅ Templates de email inicializados com sucesso
2025-09-23 17:19:45.193 -03:00 [INF] ✅ Inicialização do banco concluída com sucesso.
2025-09-23 17:19:45.198 -03:00 [WRN] The WebRootPath was not found: null. Static files may be unavailable.
2025-09-23 17:19:45.364 -03:00 [INF] Initializing UI Database
2025-09-23 17:19:45.924 -03:00 [INF] HTTP GET /saude responded 200 in 273.9860 ms
2025-09-23 17:19:46.018 -03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-23 17:19:54.083 -03:00 [INF] The request URI matched a server endpoint: "Token".
2025-09-23 17:19:54.094 -03:00 [INF] The token request was successfully extracted: {}.
2025-09-23 17:19:54.097 -03:00 [INF] The token request was rejected because the mandatory 'grant_type' parameter was missing.
2025-09-23 17:19:54.107 -03:00 [INF] The response was successfully returned as a JSON document: {
  "error": "invalid_request",
  "error_description": "The mandatory 'grant_type' parameter is missing.",
  "error_uri": "https://documentation.openiddict.com/errors/ID2029"
}.
2025-09-23 17:19:54.109 -03:00 [INF] HTTP POST /connect/token responded 400 in 33.2455 ms
2025-09-23 17:21:31.159 -03:00 [INF] 🔍 Ambiente atual: Production
2025-09-23 17:21:31.204 -03:00 [INF] 🔍 É Development? False
2025-09-23 17:21:31.349 -03:00 [INF] 🔧 Verificando estado do banco de dados...
2025-09-23 17:21:32.865 -03:00 [INF] ✅ Migrações aplicadas com sucesso
2025-09-23 17:21:32.869 -03:00 [INF] 🌱 Executando seeder inicial...
2025-09-23 17:21:32.894 -03:00 [INF] 🌱 Iniciando seeder de dados iniciais...
2025-09-23 17:21:32.999 -03:00 [INF] 📊 Conexão com banco: OK
2025-09-23 17:21:33.003 -03:00 [INF] 🔧 Criando scopes OpenIddict...
2025-09-23 17:21:33.409 -03:00 [INF] ⚠️ Scope 'profile' já existe no OpenIddict
2025-09-23 17:21:33.425 -03:00 [INF] ⚠️ Scope 'email' já existe no OpenIddict
2025-09-23 17:21:33.429 -03:00 [INF] ⚠️ Scope 'roles' já existe no OpenIddict
2025-09-23 17:21:33.431 -03:00 [INF] 🔧 Criando aplicações OpenIddict...
2025-09-23 17:21:33.491 -03:00 [INF] ⚠️ Aplicação 'gestus_api' já existe no OpenIddict
2025-09-23 17:21:33.506 -03:00 [INF] ⚠️ Aplicação 'gestus_spa' já existe no OpenIddict
2025-09-23 17:21:33.510 -03:00 [INF] 📋 Criando papéis base...
2025-09-23 17:21:33.537 -03:00 [INF] 📋 Papéis existentes antes: 6
2025-09-23 17:21:33.540 -03:00 [INF] 📋 Verificando papel: SuperAdmin
2025-09-23 17:21:33.589 -03:00 [INF] ⚠️  Papel 'SuperAdmin' já existe
2025-09-23 17:21:33.593 -03:00 [INF] 📋 Verificando papel: Admin
2025-09-23 17:21:33.595 -03:00 [INF] ⚠️  Papel 'Admin' já existe
2025-09-23 17:21:33.597 -03:00 [INF] 📋 Verificando papel: Usuario
2025-09-23 17:21:33.599 -03:00 [INF] ⚠️  Papel 'Usuario' já existe
2025-09-23 17:21:33.601 -03:00 [INF] 📋 Verificando papel: GestorUsuarios
2025-09-23 17:21:33.603 -03:00 [INF] ⚠️  Papel 'GestorUsuarios' já existe
2025-09-23 17:21:33.605 -03:00 [INF] 📋 Verificando papel: GestorPermissoes
2025-09-23 17:21:33.606 -03:00 [INF] ⚠️  Papel 'GestorPermissoes' já existe
2025-09-23 17:21:33.607 -03:00 [INF] 📋 Verificando papel: Auditor
2025-09-23 17:21:33.609 -03:00 [INF] ⚠️  Papel 'Auditor' já existe
2025-09-23 17:21:33.611 -03:00 [INF] 📋 Papéis existentes depois: 6
2025-09-23 17:21:33.615 -03:00 [INF] 🔐 Criando permissões base...
2025-09-23 17:21:33.630 -03:00 [INF] ⚠️ Todas as permissões já existem
2025-09-23 17:21:33.638 -03:00 [INF] 📋 Total de permissões no sistema: 42
2025-09-23 17:21:33.640 -03:00 [INF] 🔗 Associando permissões aos papéis...
2025-09-23 17:21:33.670 -03:00 [INF] 👑 SuperAdmin não requer associação explícita de permissões (bypass total)
2025-09-23 17:21:33.686 -03:00 [INF] ⚠️ Todas as permissões já estão associadas ao papel Admin
2025-09-23 17:21:33.688 -03:00 [INF] ✅ Admin agora tem 36 permissões (com ressalvas)
2025-09-23 17:21:33.691 -03:00 [INF] ⚠️ Todas as permissões já estão associadas ao papel Usuario
2025-09-23 17:21:33.692 -03:00 [INF] ✅ Usuario agora tem 1 permissões
2025-09-23 17:21:33.697 -03:00 [INF] ⚠️ Todas as permissões já estão associadas ao papel GestorUsuarios
2025-09-23 17:21:33.699 -03:00 [INF] ✅ GestorUsuarios agora tem 11 permissões
2025-09-23 17:21:33.701 -03:00 [INF] 🔗 Associação de permissões concluída!
2025-09-23 17:21:33.704 -03:00 [INF] 👑 Criando usuário Super Admin...
2025-09-23 17:21:33.705 -03:00 [INF] 👑 Verificando se usuário willian.cavalcante@skymsen.com já existe...
2025-09-23 17:21:33.830 -03:00 [INF] ⚠️  Super Admin já existe (ID: 1)
2025-09-23 17:21:33.891 -03:00 [INF] 🔍 Usuário tem papel SuperAdmin: True
2025-09-23 17:21:33.895 -03:00 [INF] 👥 Criando grupos base...
2025-09-23 17:21:33.910 -03:00 [INF] ⚠️  Grupo 'Administradores' já existe
2025-09-23 17:21:33.914 -03:00 [INF] ⚠️  Grupo 'Gestores' já existe
2025-09-23 17:21:33.917 -03:00 [INF] ⚠️  Grupo 'Usuarios' já existe
2025-09-23 17:21:33.919 -03:00 [INF] ⚠️  Grupo 'Auditores' já existe
2025-09-23 17:21:33.921 -03:00 [INF] 📧 Criando templates de email...
2025-09-23 17:21:33.938 -03:00 [WRN] ⚠️ Nenhuma configuração de email encontrada. Pulando criação de templates.
2025-09-23 17:21:33.940 -03:00 [INF] 🧱 Criando tipos e status de aplicação base...
2025-09-23 17:21:34.005 -03:00 [INF] 🧩 Criando aplicação 'Gestus'...
2025-09-23 17:21:34.106 -03:00 [INF] ⚠️ Aplicação 'Gestus' já existe
2025-09-23 17:21:34.109 -03:00 [INF] 👑 Criando usuário Super Admin...
2025-09-23 17:21:34.110 -03:00 [INF] 👑 Verificando se usuário willian.cavalcante@skymsen.com já existe...
2025-09-23 17:21:34.112 -03:00 [INF] ⚠️  Super Admin já existe (ID: 1)
2025-09-23 17:21:34.117 -03:00 [INF] 🔍 Usuário tem papel SuperAdmin: True
2025-09-23 17:21:34.119 -03:00 [INF] 👤 Criando usuário Administrador...
2025-09-23 17:21:34.124 -03:00 [INF] ⚠️  Administrador já existe (ID: 2)
2025-09-23 17:21:34.189 -03:00 [INF] 💾 Salvando mudanças no banco...
2025-09-23 17:21:34.225 -03:00 [INF] 💾 0 mudanças salvas no banco
2025-09-23 17:21:34.227 -03:00 [INF] ✅ Seeder executado com sucesso!
2025-09-23 17:21:34.228 -03:00 [INF] 📧 Inicializando templates de email padrão...
2025-09-23 17:21:34.232 -03:00 [INF] 🌱 Inicializando templates padrão do sistema...
2025-09-23 17:21:34.251 -03:00 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-23 17:21:34.292 -03:00 [INF] ⚠️ Template padrão já existe - Tipo: RecuperarSenha
2025-09-23 17:21:34.296 -03:00 [INF] ⚠️ Template padrão já existe - Tipo: BoasVindas
2025-09-23 17:21:34.298 -03:00 [INF] ⚠️ Template padrão já existe - Tipo: ConfirmarEmail
2025-09-23 17:21:34.301 -03:00 [INF] ✅ Templates padrão inicializados com sucesso
2025-09-23 17:21:34.303 -03:00 [INF] ✅ Templates de email inicializados com sucesso
2025-09-23 17:21:34.304 -03:00 [INF] ✅ Inicialização do banco concluída com sucesso.
2025-09-23 17:21:34.310 -03:00 [WRN] The WebRootPath was not found: null. Static files may be unavailable.
2025-09-23 17:21:34.502 -03:00 [INF] Initializing UI Database
2025-09-23 17:21:35.135 -03:00 [INF] HTTP GET /saude responded 200 in 332.1236 ms
2025-09-23 17:21:35.231 -03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-23 17:21:36.636 -03:00 [INF] The request URI matched a server endpoint: "Token".
2025-09-23 17:21:36.651 -03:00 [INF] The token request was successfully extracted: {
  "grant_type": "password",
  "scope": "openid profile email roles",
  "password": "[redacted]",
  "username": "willian.cavalcante@skymsen.com",
  "client_id": "gestus_api",
  "client_secret": "[redacted]"
}.
2025-09-23 17:21:36.852 -03:00 [INF] The token request was successfully validated.
2025-09-23 17:21:36.873 -03:00 [INF] 🔐 Processando grant type password para: willian.cavalcante@skymsen.com
2025-09-23 17:21:37.015 -03:00 [INF] 🕐 Token criado em - UTC: "2025-09-23T20:21:37.0150602Z", Timezone: E. South America Standard Time
2025-09-23 17:21:37.096 -03:00 [INF] ✅ Token gerado com sucesso para: willian.cavalcante@skymsen.com
2025-09-23 17:21:37.310 -03:00 [INF] The response was successfully returned as a JSON document: {
  "access_token": "[redacted]",
  "token_type": "Bearer",
  "expires_in": 3600,
  "scope": "openid",
  "id_token": "[redacted]"
}.
2025-09-23 17:21:37.316 -03:00 [INF] HTTP POST /connect/token responded 200 in 693.7409 ms
2025-09-23 17:21:42.391 -03:00 [INF] The request URI matched a server endpoint: "Token".
2025-09-23 17:21:42.396 -03:00 [INF] The token request was successfully extracted: {
  "grant_type": "password",
  "scope": "openid profile email roles",
  "username": "willian.cavalcante@skymsen.com",
  "password": "[redacted]",
  "code": "[redacted]",
  "redirect_uri": "string",
  "code_verifier": "string",
  "refresh_token": "[redacted]",
  "client_id": "gestus_api",
  "client_secret": "[redacted]"
}.
2025-09-23 17:21:42.451 -03:00 [INF] The token request was successfully validated.
2025-09-23 17:21:42.465 -03:00 [INF] 🔐 Processando grant type password para: willian.cavalcante@skymsen.com
2025-09-23 17:21:42.561 -03:00 [INF] 🕐 Token criado em - UTC: "2025-09-23T20:21:42.5609657Z", Timezone: E. South America Standard Time
2025-09-23 17:21:42.575 -03:00 [INF] ✅ Token gerado com sucesso para: willian.cavalcante@skymsen.com
2025-09-23 17:21:42.592 -03:00 [INF] The response was successfully returned as a JSON document: {
  "access_token": "[redacted]",
  "token_type": "Bearer",
  "expires_in": 3599,
  "scope": "openid",
  "id_token": "[redacted]"
}.
2025-09-23 17:21:42.596 -03:00 [INF] HTTP POST /connect/token responded 200 in 210.6071 ms
2025-09-23 17:21:47.380 -03:00 [INF] HTTP GET /index.html responded 200 in 53.9345 ms
2025-09-23 17:21:47.432 -03:00 [INF] HTTP GET /.well-known/appspecific/com.chrome.devtools.json responded 404 in 3.9307 ms
2025-09-23 17:21:47.441 -03:00 [INF] HTTP GET /index.css responded 200 in 1.8463 ms
2025-09-23 17:21:47.443 -03:00 [INF] HTTP GET /index.js responded 200 in 1.8554 ms
2025-09-23 17:21:47.457 -03:00 [INF] HTTP GET /swagger-ui-standalone-preset.js responded 200 in 16.0549 ms
2025-09-23 17:21:47.457 -03:00 [INF] HTTP GET /swagger-ui.css responded 200 in 25.6408 ms
2025-09-23 17:21:47.525 -03:00 [INF] HTTP GET /swagger-ui-bundle.js responded 200 in 84.9540 ms
2025-09-23 17:21:47.847 -03:00 [INF] HTTP GET /favicon-32x32.png responded 200 in 0.6589 ms
2025-09-23 17:21:48.327 -03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 481.6443 ms
2025-09-23 17:22:05.522 -03:00 [INF] HTTP GET /saude responded 200 in 99.5758 ms
